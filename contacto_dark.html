<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formulario de Consulta ‚Äî GuiaIA</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b0f1a;
      --card: rgba(13, 18, 32, .6);
      --text: #e6ecff;
      --muted: #9aa4bf;
      --line: #1f2942;
      --accent1: #22d3ee;
      --accent2: #7c3aed;
      --accent3: #60a5fa;
      --ok: #10b981;
      --err: #ef4444;
      --btn-dark: #1E3A89; /* azul oscuro */
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body.page-contacto{
      margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(800px 480px at 12% -10%, rgba(124,58,237,.18) 0%, transparent 60%),
        radial-gradient(680px 420px at 108% 10%, rgba(34,211,238,.18) 0%, transparent 60%),
        linear-gradient(180deg, #0a0f1e 0%, #0b0f1a 100%);
    }

    /* NAV */
    nav{
      position: sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(10,14,26,.55);
      border-bottom: 1px solid var(--line);
    }
    nav .wrap{
      max-width: 1100px; margin: 0 auto; padding:.5rem 1rem;
      display:flex; align-items:center; justify-content:center; gap:1rem;
    }
    #main-nav-list{ list-style:none; margin:0; padding:0; display:flex; gap:.5rem }
    #main-nav-list a{
      display:inline-block; padding:.5rem .9rem; border-radius:12px;
      color: var(--text); text-decoration:none; font-weight:700; letter-spacing:.2px;
      transition: transform .18s ease, background .18s ease;
    }
    #main-nav-list a:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06) }
    .highlight-contacto > a{
      background: linear-gradient(90deg, var(--accent2), var(--accent1));
      color:#fff !important;
      box-shadow: 0 10px 25px rgba(124,58,237,.28), inset 0 0 0 1px rgba(255,255,255,.06);
    }

    /* Light mode: nav claro y links oscuros para contraste */
    body:not(.dark-mode) nav{
      background: rgba(255,255,255,.72);
      border-bottom-color: #dbe3ff;
    }
    body:not(.dark-mode) #main-nav-list a{ color:#0e1628 }
    body:not(.dark-mode) #main-nav-list a:hover{ background: rgba(0,0,0,.05) }

    /* Contenedor */
    .shell{ max-width: 980px; margin: 1.4rem auto; padding: 0 1rem }
    h1{ margin:0 0 .2rem 0; font-size: clamp(1.35rem, 2.2vw, 1.9rem); letter-spacing:.2px }
    .lead{ margin:0 0 .9rem 0; color: var(--muted) }

    .card{
      position:relative; border-radius: 16px; padding: 1rem;
      background: var(--card);
      border: 1px solid var(--line);
      box-shadow: 0 16px 44px rgba(0,0,0,.32);
      overflow:hidden;
    }
    .card::before{
      content:""; position:absolute; inset:-2px;
      background: conic-gradient(from 180deg, var(--accent2), var(--accent1), var(--accent3), var(--accent2));
      filter: blur(10px); opacity:.18; z-index:0; transition: opacity .25s ease;
    }
    .card:hover::before{ opacity:.24 }
    .card > *{ position:relative; z-index:1 }

    form{ display:grid; gap: .7rem }
    .row{ display:grid; grid-template-columns: 1fr; gap:.7rem }
    @media (min-width: 880px){
      .row.two{ grid-template-columns: 1fr 1fr }
      .row.section-2col{ grid-template-columns: 1fr 1fr } /* igual ancho que Nombre/Email */
    }

    .field{ position:relative }
    .field input, .field select, .field textarea{
      width:100%;
      background: rgba(255,255,255,.06);
      border:1px solid var(--line);
      color:var(--text);
      padding: .9rem .9rem .8rem 2.4rem;
      border-radius:14px;
      outline:none;
      transition: border-color .18s ease, box-shadow .18s ease, background .18s ease;
    }
    .field textarea{ min-height: 140px; resize: vertical; padding-top: 1.5rem } /* placeholder m√°s abajo */
    /* Placeholders m√°s oscuros (sutil, pero legibles) */
    .field input::placeholder,
    .field textarea::placeholder{ color:#7f8db4 }
    .field input:focus, .field select:focus, .field textarea:focus{
      border-color: rgba(124,58,237,.65);
      box-shadow: 0 0 0 3px rgba(124,58,237,.20);
      background: rgba(255,255,255,.08);
    }
    .field label{
      position:absolute; left: 2.4rem; top: .82rem;
      color: var(--muted); pointer-events:none; font-weight:700;
      transition: transform .18s ease, font-size .18s ease, top .18s ease, opacity .18s ease;
    }
    /* Flotante para inputs/textarea al escribir o enfocar */
    .field input:not(:placeholder-shown) + label,
    .field textarea:not(:placeholder-shown) + label,
    .field input:focus + label,
    .field textarea:focus + label{
      transform: translateY(-.8rem);
      top: .25rem; font-size:.78rem; opacity:.9;
    }
    /* Forzar flotante cuando queremos hint permanente */
    .field.hint-floating label{
      transform: translateY(-.8rem);
      top:.25rem; font-size:.78rem; opacity:.9;
    }

    /* "Sobre qu√© secci√≥n" */
    .section-wrap{
      display:grid; grid-template-columns: 240px 1fr; gap:.7rem; align-items:center;
    }
    .label-aside{
      display:flex; align-items:center; font-weight:700; color:var(--muted);
      padding-left:.2rem;
    }
    .select-field{ position:relative }
    .select-field .icon{ top:.78rem }
    .select-field select{ padding-left:2.4rem }
    /* === Legibilidad del desplegable (opciones) en modo oscuro === */
    .field select option{ color:#0e1628; background:#ffffff; }
    body.dark-mode .field select option{ color:#0e1628; background:#ffffff; } /* forzamos fondo claro con texto oscuro */
    .field select option[disabled]{ color:#94a3b5; }

    /* Cuando el select est√° con valor v√°lido, aclaramos el fondo como los inputs "rellenos" */
    .select-field select:valid{ background: rgba(255,255,255,.12) }
    body:not(.dark-mode) .select-field select:valid{ background:#ffffff } /* blanco en light */

    .icon{
      position:absolute; left:.72rem; top:.82rem; opacity:.75;
      width:1.05rem; height:1.05rem; pointer-events:none; color:#a5b4d8;
    }

    .actions{ display:flex; align-items:center; gap:.7rem; flex-wrap:wrap; margin-top:.1rem }
    button.primary{
      appearance:none; border:0; cursor:pointer; font-weight:800;
      color:#0b0f1a; background:#fff; padding:.8rem 1rem; border-radius:12px;
      transition: transform .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
      box-shadow: 0 10px 22px rgba(34,211,238,.2), inset 0 0 0 1px rgba(0,0,0,.06);
      background-image: linear-gradient(90deg, #ffffff, #f3f9ff);
    }
    /* Bot√≥n azul en light */
    body:not(.dark-mode) button.primary{
      background: var(--btn-dark); color:#fff;
      box-shadow: 0 10px 22px rgba(30,58,137,.3);
      background-image: none;
    }
    body:not(.dark-mode) button.primary:hover{ box-shadow: 0 14px 28px rgba(30,58,137,.42); transform: translateY(-1px) }
    button.primary:hover{ transform: translateY(-1px); box-shadow: 0 14px 26px rgba(34,211,238,.28) }
    button.primary:disabled{ opacity:.65; cursor:not-allowed; transform:none }

    .status{ display:none; font-weight:800 }
    .status.ok{ color:var(--ok) } .status.err{ color:var(--err) }

    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%) translateY(24px);
      background: rgba(16,185,129,.12); color:#d1fae5; border:1px solid rgba(16,185,129,.35);
      padding:.6rem .9rem; border-radius:10px; backdrop-filter: blur(10px);
      font-weight:800; opacity:0; transition: all .22s ease; z-index:60;
    }
    .toast.show{ opacity:1; transform:translateX(-50%) translateY(0) }
    .toast.err{ background: rgba(239,68,68,.12); color:#fee2e2; border-color: rgba(239,68,68,.35) }

    /* Light mode tokens */
    body:not(.dark-mode){
      --bg: #f6f8ff;
      --card: rgba(255,255,255,.86);
      --text: #0e1628;
      --muted: #4b5567;
      --line: #dbe3ff;
    }

    /* Responsivo: la secci√≥n pasa a una columna en mobile */
    @media (max-width: 879px){
      .section-wrap{ grid-template-columns: 1fr }
    }
  </style>
</head>
<body class="page-contacto">

  <nav>
    <div class="wrap">
      <ul id="main-nav-list">
        <li><a href="index.html">Inicio</a></li>
        <li class="highlight-contacto"><a href="contacto.html">Contacto</a></li>
      </ul>
      <button id="theme-toggle" aria-label="Cambiar tema" title="Cambiar tema" style="margin-left:1rem;background:none;border:1px solid var(--line);color:var(--text);border-radius:12px;padding:.45rem .7rem;cursor:pointer">üåô</button>
    </div>
  </nav>

  <main class="shell">
    <div class="card">
      <h1>Formulario de Consulta</h1>
      <p class="lead">Dejanos tu consulta y te respondemos a la brevedad.</p>

      <form id="contactForm" novalidate>
        <div class="row two">
          <div class="field hint-floating">
            <input id="name" name="name" type="text" placeholder="Ej.: Juan P√©rez" autocomplete="name" required>
            <label for="name">Nombre completo</label>
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5Zm0 2c-4 0-8 2-8 6v2h16v-2c0-4-4-6-8-6Z" stroke-width="1.5"/></svg>
          </div>
          <div class="field hint-floating">
            <input id="email" name="email" type="email" placeholder="tunombre@gmail.com" autocomplete="email" required>
            <label for="email">Email</label>
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Z" stroke-width="1.5"/><path d="m3 7 9 6 9-6" stroke-width="1.5"/></svg>
          </div>
        </div>

        <!-- Fila de secci√≥n: ocupa solo la mitad izquierda (igual a ancho de "Nombre") -->
        <div class="row section-2col">
          <div>
            <div class="section-wrap">
              <div class="label-aside">Sobre qu√© secci√≥n</div>
              <div class="field select-field">
                <select id="menu" name="menu" required>
                  <option value="" selected disabled>Eleg√≠ una opci√≥n‚Ä¶</option>
                  <option>M√≥dulos</option>
                  <option>Herramientas</option>
                  <option>Noticias</option>
                  <option>Glosario</option>
                </select>
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="m6 9 6 6 6-6" stroke-width="1.5"/></svg>
              </div>
            </div>
          </div>
          <div><!-- reservado para futuro (columna derecha vac√≠a) --></div>
        </div>

        <div class="row">
          <div class="field hint-floating">
            <textarea id="message" name="message" placeholder="Escrib√≠ tu consulta‚Ä¶" required></textarea>
            <label for="message">Mensaje</label>
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v8Z" stroke-width="1.5"/></svg>
          </div>
        </div>

        <div style="position:absolute;left:-5000px;opacity:0;pointer-events:none">
          <label>Dejar vac√≠o</label>
          <input type="text" id="website" name="website" tabindex="-1" autocomplete="off"/>
        </div>

        <div class="actions">
          <button id="sendBtn" class="primary" type="submit">Enviar</button>
          <span id="statusOk" class="status ok">¬°Mensaje enviado!</span>
          <span id="statusErr" class="status err">Error al enviar. Prob√° m√°s tarde.</span>
        </div>

        <p class="muted" style="margin:.4rem 0 0 0; color:var(--muted)">Al enviar acept√°s que usemos tus datos solo para responder tu consulta.</p>
      </form>
    </div>
  </main>

  <div id="toast" class="toast">¬°Mensaje enviado!</div>

  <script>
    const SCRIPT_URL = "PASTE_YOUR_APPS_SCRIPT_WEB_APP_URL_HERE";

    (function(){
      const btn = document.getElementById('theme-toggle');
      function applyTheme(mode){
        const isDark = (mode === 'dark');
        document.body.classList.toggle('dark-mode', isDark);
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        btn.textContent = isDark ? 'üåû' : 'üåô';
      }
      const saved = localStorage.getItem('theme') || 'dark';
      applyTheme(saved);
      btn.addEventListener('click', ()=>{
        const next = document.body.classList.contains('dark-mode') ? 'light' : 'dark';
        applyTheme(next);
      });
    })();

    const form = document.getElementById('contactForm');
    const btn = document.getElementById('sendBtn');
    const ok = document.getElementById('statusOk');
    const err = document.getElementById('statusErr');
    const toast = document.getElementById('toast');

    function validateEmail(email){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email) }
    function showToast(text, isErr=false){
      toast.textContent = text;
      toast.classList.toggle('err', !!isErr);
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 2200);
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      ok.style.display='none'; err.style.display='none';

      const name = form.name.value.trim();
      const email = form.email.value.trim();
      const menu = form.menu.value;
      const message = form.message.value.trim();
      const hp = form.website.value.trim();

      if(!name || !validateEmail(email) || !menu || !message){
        err.textContent = "Complet√° todos los campos correctamente.";
        err.style.display='inline'; showToast("Revis√° los campos", true); return;
      }

      btn.disabled = true; btn.textContent = "Enviando‚Ä¶";
      try{
        const payload = new URLSearchParams({ name, email, menu, message, hp, ua:navigator.userAgent, page:location.href, ts:new Date().toISOString() });
        const res = await fetch(SCRIPT_URL, { method:"POST", headers:{ "Content-Type":"application/x-www-form-urlencoded;charset=UTF-8" }, body: payload.toString(), redirect:"follow" });
        if(res.ok){ ok.style.display='inline'; showToast("¬°Mensaje enviado!"); form.reset(); }
        else { err.textContent="No se pudo enviar (respuesta inv√°lida)."; err.style.display='inline'; showToast("No se pudo enviar", true); }
      }catch(ex){
        err.textContent="No se pudo conectar al servidor."; err.style.display='inline'; showToast("Sin conexi√≥n", true);
      }finally{ btn.disabled=false; btn.textContent="Enviar"; }
    });
  </script>
</body>
</html>
